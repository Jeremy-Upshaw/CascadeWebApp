<!-- Material Admin Pro drawer navigation -->
<nav class="drawer accordion drawer-dark bg-dark text-light" id="drawerAccordion">
    <div class="drawer-menu">
        <div class="nav">
            <!-- Home/Dashboard -->
            <NavLink class="nav-link text-light" href="/" Match="NavLinkMatch.All">
                Home
            </NavLink>

            <!-- Items with sub-links -->
            <div class="nav-item-group">
                <button class="nav-link text-light collapsible-nav-link" @onclick='() => ToggleSubMenu("items")' type="button">
                    Items
                </button>
                <div class="sub-menu @(IsSubMenuOpen("items") ? "sub-menu-open" : "")">
                    <NavLink class="nav-link text-light sub-nav-link" href="items/threadless">
                        Threadless
                    </NavLink>
                    <NavLink class="nav-link text-light sub-nav-link" href="items/threaded">
                        Threaded
                    </NavLink>
                </div>
            </div>

            <!-- Orders with sub-links -->
            <div class="nav-item-group">
                <button class="nav-link text-light collapsible-nav-link" @onclick='() => ToggleSubMenu("orders")' type="button">
                    Orders
                </button>
                <div class="sub-menu @(IsSubMenuOpen("orders") ? "sub-menu-open" : "")">
                    <NavLink class="nav-link text-light sub-nav-link" href="orders/pulllist">
                        Pull List
                    </NavLink>
                    <NavLink class="nav-link text-light sub-nav-link" href="orders/labels">
                        Labels
                    </NavLink>
                    <NavLink class="nav-link text-light sub-nav-link" href="orders/assign">
                        Assign
                    </NavLink>
                </div>
            </div>

            <!-- Customers with sub-links -->
            <div class="nav-item-group">
                <button class="nav-link text-light collapsible-nav-link" @onclick='() => ToggleSubMenu("customers")' type="button">
                    Customers
                </button>
                <div class="sub-menu @(IsSubMenuOpen("customers") ? "sub-menu-open" : "")">
                    <NavLink class="nav-link text-light sub-nav-link" href="customers/activeorder">
                        Active Order
                    </NavLink>
                    <NavLink class="nav-link text-light sub-nav-link" href="customers/pendingpayment">
                        Pending Payment
                    </NavLink>
                </div>
            </div>

            <!-- Batches -->
            <NavLink class="nav-link text-light" href="batches">
                Batches
            </NavLink>

            <!-- Production -->
            <NavLink class="nav-link text-light" href="production">
                Production
            </NavLink>
        </div>
    </div>
</nav>

@code {
    private Dictionary<string, bool> _openSubMenus = new Dictionary<string, bool>();

    private void ToggleSubMenu(string menuId)
    {
        if (_openSubMenus.ContainsKey(menuId))
        {
            _openSubMenus[menuId] = !_openSubMenus[menuId];
        }
        else
        {
            _openSubMenus[menuId] = true;
        }
    }

    private bool IsSubMenuOpen(string menuId)
    {
        return _openSubMenus.ContainsKey(menuId) && _openSubMenus[menuId];
    }
}